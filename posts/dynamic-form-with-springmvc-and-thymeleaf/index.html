<!doctype html>
<html lang="en">
<head><meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta content='text/html; charset=utf-8' http-equiv='content-type' />

  <title>Dynamic forms with springmvc and thymeleaf - Sting&#39;s Note</title>
  <meta content='Dynamic forms with springmvc and thymeleaf - Sting&#39;s Note' property='title' />
  <meta content='Dynamic forms with springmvc and thymeleaf - Sting&#39;s Note' property='og:title' />


<meta property="og:description" content="Requirements SubjectGroup and SubjectGroupOption has one-to-many relationship. When adding a subject group, subject group options can be added inline.
Things I’ve learned.  When adding an option, don’t need to use javascript to handle the added html snippet. Just submit the add request to controller and handle the adding in the controller (Add a new options into the option list of subject group), then return to the add page. Spring mvc’s data binding and thyme leaf’s for loop will handle the html." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://stingh711.github.io/posts/dynamic-form-with-springmvc-and-thymeleaf/" />


<meta property="article:published_time" content="2014-08-01T00:00:00&#43;08:00"/>

<meta property="article:modified_time" content="2014-08-01T00:00:00&#43;08:00"/>








<meta name="generator" content="Hugo 0.42.1" />

<link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,600" rel="stylesheet">
<style type="text/css">/*https://coolors.co/afd5aa-f0f2ef-a69f98-3d3d3d-8c6057*/
:root {
  --main-color: #8C6056; 
  --secondary-color: #AFD5AA;
  --logo-text-color: #fff;
  --body-text-color: #3d3d3d;
  --heading-text-color: #383838;
  --background-color: #fff;
}</style>
<link href='/css/tachyons.min.css' rel="stylesheet">
<link href='/css/styles.css' rel="stylesheet">


<link rel="icon" 
 
  href='/favicon.ico'

type="image/x-icon"/>

<link href='/feed.xml' rel="alternate" type="application/atom+xml" title="Sting&#39;s Note" />

<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-10412053-2', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>
</head>
<body class="global-font">
  <nav class=" justify-between border-box pa3 pl3-l pr2-l mt1 mt0-ns" id="navbar">
  <div class="flex">
    <a class="f4 fw6 ttu no-underline dim bg-main-color pv1 ph2 br2" id="site-title" href='/' title="Home">Sting&#39;s Note</a>
  </div>
  
</nav>
  
<main class="center mv4 content-width ph3">
  <div class="f3 fw6 heading-color heading-font post-title">Dynamic forms with springmvc and thymeleaf</div>
  <p class="silver f6 mt1 mb4 post-meta">
    <time>01 Aug 2014</time> 
     | 
    
    
    tags: [ <a href='/tags/spring' class="link silver">spring</a>  ]
    
  </p>
  <div class="lh-copy post-content">

<h2 id="requirements">Requirements</h2>

<p>SubjectGroup and SubjectGroupOption has one-to-many relationship. When adding a subject group, subject group options can be added inline.</p>

<h2 id="things-i-ve-learned-dot">Things I’ve learned.</h2>

<ol>
<li>When adding an option, don’t need to use javascript to handle the added html snippet. Just submit the add request to controller and handle the adding in the controller (Add a new options into the option list of subject group), then return to the add page. Spring mvc’s data binding and thyme leaf’s for loop will handle the html. (In EDC, I use javascript to append option html. It works. But there are some duplicate codes in JSP and javascript)</li>
<li>Can use the same way to handle subject option removing.</li>
<li>If there are multiple submit button in one form. We can use button’s name to separate them. In controller, use RequestMapping’s params to make the submit request to the right controller method.</li>
</ol>

<h2 id="code">Code</h2>

<p>SubjectGroupController.java</p>

<pre><code class="language-java">package edc.web;

import edc.model.SubjectGroup;
import edc.model.SubjectGroupOption;
import edc.service.SubjectGroupService;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.validation.BindingResult;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;

@Controller
@RequestMapping(&quot;/sg&quot;)
public class SubjectGroupController {
    private SubjectGroupService subjectGroupService;

    @Autowired
    public void setSubjectGroupService(SubjectGroupService subjectGroupService) {
    this.subjectGroupService = subjectGroupService;
    }

    @RequestMapping(value = &quot;add&quot;)
    public String add(SubjectGroup subjectGroup) {
    return &quot;subjectGroup/add&quot;;
    }

    @RequestMapping(value = &quot;add&quot;, params = {&quot;addOption&quot;})
    public String addOption(SubjectGroup subjectGroup, BindingResult result) {
    subjectGroup.getOptions().add(new SubjectGroupOption());
    return &quot;subjectGroup/add&quot;;
    }

    @RequestMapping(value = &quot;add&quot;, method = RequestMethod.POST)
    public String save(SubjectGroup subjectGroup, BindingResult result) {
    this.subjectGroupService.save(subjectGroup);
    return &quot;redirect:/sg/add&quot;;
    }
}
</code></pre>

<p>add.html</p>

<pre><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;
  &lt;head&gt;
    &lt;meta charset=&quot;utf-8&quot;/&gt;
    &lt;title&gt;&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;section&gt;
      &lt;h2&gt;Add Subject Group&lt;/h2&gt;
      &lt;form action=&quot;#&quot; th:action=&quot;@{/sg/add}&quot; th:object=&quot;${subjectGroup}&quot; method=&quot;POST&quot;&gt;
    &lt;p&gt;&lt;input type=&quot;text&quot; th:field=&quot;*{name}&quot; placeholder=&quot;Name...&quot;/&gt;&lt;/p&gt;
    &lt;h3&gt;Options&lt;/h3&gt;
    &lt;button type=&quot;submit&quot; name=&quot;addOption&quot;&gt;Add Option&lt;/button&gt;
    &lt;table&gt;
      &lt;tr th:each=&quot;option, rowStat : *{options}&quot;&gt;
        &lt;td&gt;&lt;input type=&quot;text&quot; th:field=&quot;*{options[__${rowStat.index}__].label}&quot; placeholder=&quot;Option...&quot;/&gt;&lt;/td&gt;
      &lt;/tr&gt;
    &lt;/table&gt;
    &lt;button type=&quot;submit&quot;&gt;Add&lt;/button&gt;
      &lt;/form&gt;
    &lt;/section&gt;
  &lt;/body&gt;
&lt;/html&gt;
</code></pre>
</div>
</main>
 






<div class="tl fixed list-pages lh-copy" id="contents-list"></div>



<div class="pagination tc tr-l db fixed-l bottom-2-l right-2-l mb3 mb0-l">
  
<a id="scroll-to-top" class="f6 o-0 link br2 ph2 pv1 mb1 bg-main-color pointer" onclick="topFunction()" style="color: #fff; visibility: hidden; display: none; transition: opacity .5s, visibility .5s;" title="back to top">back to top</a>
<br>
  <p class="mb0 mt2">
  
  <a href="https://stingh711.github.io/posts/notes-about-postgresql/">next post</a>
  </p>
</div>

  <footer class="content-width mt0 mt5-l mb4 f6 center ph3 gray tc tl-l">
  <hr class="dn db-l ml0-l gray w3"><br>
  Powered by <a href="https://gohugo.io/" target="_blank" class="link gray dim">Hugo</a>, based on the <a href="https://github.com/lingxz/er" target="_blank" class="link gray dim">Er</a> theme. <br>
  
</footer>
  



<script src="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.1.1/tocbot.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.1.1/tocbot.css">
<style>.is-active-link::before { background-color: var(--secondary-color); }</style>




<script type="text/javascript">
var prevScrollpos = window.pageYOffset;
window.onscroll = function() {
  var currentScrollPos = window.pageYOffset;

  
  if (document.getElementById("tag-cloud") !== null) { 
    if (prevScrollpos > currentScrollPos) { 
      document.getElementById("tag-cloud").style.visibility = "visible";
      document.getElementById("tag-cloud").style.opacity = "1";
    } else {
      document.getElementById("tag-cloud").style.visibility = "hidden";
      document.getElementById("tag-cloud").style.opacity = "0";
    }
  }
  

  
  if (document.body.scrollTop > 1000 || document.documentElement.scrollTop > 1000) {
      document.getElementById("scroll-to-top").style.display = "inline";
      document.getElementById("scroll-to-top").style.visibility = "visible";
      document.getElementById("scroll-to-top").style.opacity = "1";
  } else {
      document.getElementById("scroll-to-top").style.visibility = "hidden";
      document.getElementById("scroll-to-top").style.opacity = "0";
  }
  
  prevScrollpos = currentScrollPos;
}


function topFunction() {
  document.body.scrollTop = 0; 
  document.documentElement.scrollTop = 0; 
}






if (document.getElementById("contents-list") !== null && document.getElementsByClassName("post-content").length !== 0) { 
  tocbot.init({
    
    tocSelector: '#contents-list',
    
    contentSelector: '.post-content',
    
    headingSelector: 'h1, h2, h3',
  });
}


</script>




</body>
</html>